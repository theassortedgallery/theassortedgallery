<!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>The Assorted Gallery</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Great+Vibes&display=swap" rel="stylesheet">
<style>

:root{
  --accent:#a67c52;
  --accent-dark:#8b5e34;
  --card:#fff8ef;
  --bg:linear-gradient(135deg,#fffaf0,#f5e6ca);
}
body {
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:#5a4635;
  margin:0;
  padding:0;
}
header {
  text-align:center;
  padding:40px 10px 20px;
  position:sticky;
  top:0;
  background:var(--bg);
  z-index:1000;
}
header h1 {
  font-family:'Great Vibes',cursive;
  font-size:3em;
  color:var(--accent);
  margin:0;
}
header p {
  font-size:1.2em;
  color:#6b4f3a;
  margin:6px 0 0 0;
}
.container {
  display:flex;
}
.sidebar {
  width:220px;
  background:var(--card);
  border-right:2px solid #e0d2b8;
  padding:20px;
  position:sticky;
  top:120px;
  height:calc(100vh - 120px);
  overflow-y:auto;
  z-index:2000;
}
.sidebar h2 {
  font-family:'Great Vibes',cursive;
  font-size:1.6em;
  color:var(--accent-dark);
  text-align:center;
  margin-bottom:12px;
}
.sidebar ul {list-style:none; padding:0; margin:0;}
.sidebar li {
  padding:10px; 
  margin:4px 0; 
  background:#fff3e0; 
  border-radius:8px; 
  cursor:pointer; 
  text-align:center; 
  transition:background .2s;
}
.sidebar li:hover, .sidebar li.active {
  background:var(--accent); 
  color:#fff;
}
main {
  flex:1; 
  padding:20px;
}
.products { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
  gap:16px; 
  width: 100%; 
  margin:auto; 
}
.product {
  background:var(--card); 
  border-radius:12px; 
  box-shadow:0 4px 10px rgba(0,0,0,0.08); 
  text-align:center; 
  padding:12px; 
  transition: transform .18s ease, box-shadow .18s ease;
}
.product:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 18px rgba(0,0,0,0.15);
}
.product img {
  width: 100%;
  height: auto;
  object-fit: contain;
  border-radius: 8px;
  cursor: pointer;
}
.product h3 {
  margin:10px 0 6px;
  color:#8b5e34;
  font-size:0.98rem;
}
.product p {
  font-size:0.88rem;
  color:#5a4635;
  margin:0 0 8px 0;
  min-height:36px;
}
.price {
  font-weight:600; 
  color:var(--accent); 
  margin:6px 0;
}
.stock {
  font-size:0.78em; 
  color:#555; 
  margin-bottom:8px;
}
button {
  background:var(--accent);
  color:white;
  border:none;
  padding:8px 14px;
  border-radius:8px;
  cursor:pointer;
  transition:background .12s;
  font-size:0.95rem;
}
button:hover {background:var(--accent-dark);}
button:disabled {background:#ccc; cursor:not-allowed;}
#cart-btn {
  position:fixed;
  top:18px;
  right:18px;
  background:var(--accent);
  color:white;
  border:none;
  border-radius:50%;
  width:54px;
  height:54px;
  font-size:1.4em;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.18);
  z-index:2001;
  display:flex; justify-content:center; align-items:center;
}
#cart-badge {
  position: absolute;
  bottom: 0;
  left: 0;
  font-size: 20px;
  font-weight: bold;
  color: red;
  pointer-events: none;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 50%;
  padding: 4px 8px;
  min-width: 24px;
  text-align: center;
  transition: transform 0.2s ease;
  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  text-shadow: 0 0 2px #fff,0 0 4px #fff;
}
#cart-badge.animate {transform: scale(1.6);}
#toggle-sidebar {
  display:none;
  position:fixed;
  top:18px;
  left:18px;
  z-index:2002;
  background:var(--accent);
  color:white;
  border:none;
  border-radius:50%;
  width:54px;
  height:54px;
  font-size:1.4em;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.18);
}
#cart-panel {
  position:fixed;
  top:0;
  right:0;
  width:360px;
  max-width:100%;
  height:100%;
  background:var(--card);
  box-shadow:-3px 0 18px rgba(0,0,0,0.18);
  padding:18px;
  transition:transform 0.35s ease;
  z-index:1000;
  overflow-y:auto;
  transform:translateX(100%);
}
#cart-panel.open {transform:translateX(0);}
#cart-panel h2 {text-align:center; color:#8b5e34; margin:0 0 10px 0;}
#cart-items {margin-top:12px;}
.cart-item {
  border-bottom:1px solid #e6dfd4;
  padding:10px 0;
  font-size:0.95rem;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.cart-item span {display:block; max-width:75%;}
.cart-item button {
  background:#c26d5a;
  border-radius:50%;
  width:28px;
  height:28px;
  font-size:1em;
  padding:0;
  line-height:1;
}
#total {font-weight:700; text-align:right; margin-top:12px;}
#checkout-btn {
  position: sticky;
  bottom: 12px; /* raise it a little from the bottom */
  width: 100%;
  background: var(--accent-dark);
  color: #fff;
  margin-top: 14px;
  padding: 14px; /* slightly bigger for more visibility */
  border: none;
  border-radius: 12px;
  cursor: pointer;
  font-size: 1.1rem;
  z-index: 20; /* above cart items */
  box-shadow: 0 6px 16px rgba(0,0,0,0.25); /* added shadow for prominence */
  transition: background 0.2s, transform 0.2s;
}

#checkout-btn:hover {
  background: #a05a32;
  transform: translateY(-2px); /* subtle lift on hover */
}

/* Checkout modal */
#checkout-modal {
  display:none;
  position: fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.58);
  justify-content: center;
  align-items: center;
  z-index: 5000;
  padding: 18px;
  opacity:0;
  transition: opacity 0.25s ease;
}
#checkout-modal.show {opacity:1;}
#checkout-modal .modal-content {
  background: var(--card);
  padding: 18px;
  border-radius: 12px;
  max-width: 420px;
  width: 100%;
  max-height: 90vh;
  overflow: hidden;
  text-align: left;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  font-size: 0.96rem;
  display:flex;
  flex-direction: column;
  transform: translateY(-20px);
  transition: transform 0.25s ease;
}
#checkout-modal.show .modal-content {transform:translateY(0);}
#checkout-summary-container {
  flex:1;
  overflow-y:auto;
  margin-bottom:10px;
  padding-bottom: 60px; /* space for sticky total */
}
#checkout-summary {
  margin:0;
}
#checkout-total {
  position: sticky;
  bottom: 0;
  background: #fff3e6;
  border: 1px solid #e0d2b8;
  border-radius: 10px;
  text-align: right;
  font-weight: 700;
  font-size: 1.05rem;
  color: #8b5e34;
  padding: 12px;
}

#checkout-modal .modal-content h3 {margin-top:0; text-align:center;}
#checkout-modal .modal-close {display:block; margin-left:auto; background:transparent; border:none; font-size:1.1rem; cursor:pointer;}
#checkout-modal h4 {
  background: rgba(255,215,150,0.15);
  padding:6px 8px;
  border-radius:6px;
  text-align:center;
}
#checkout-modal p, #checkout-modal a {
  font-size:0.85rem;
  text-align:center;
  margin-top:8px;
}
#checkout-modal a {
  display:inline-block;
  background:#a67c52;
  color:white;
  padding:10px 20px;
  border-radius:8px;
  text-decoration:none;
  font-size:0.9rem;
  transition: background 0.2s;
}
#checkout-modal a:hover {background: var(--accent-dark);}
#checkout-modal button {margin-top:12px; padding:8px 14px; border-radius:8px; background:#555; color:#fff; cursor:pointer;}
@media(max-width:768px){
  .container{flex-direction:column;}
  .sidebar{
    position:fixed;
    top:0;
    left:0;
    height:100%;
    transform:translateX(-100%);
    transition:transform 0.35s ease;
  }
  .sidebar.open {transform:translateX(0);}
  #toggle-sidebar {display:block;}
}
@media (max-width: 768px) { 
  header {
    padding: 20px 10px 10px;
  }
  header h1 {
    font-size: 2em;
  }
  header p {
    font-size: 0.9em;
  }
}

</style>
</head>
<body>
<header>
  <h1>Welcome to The Assorted Gallery</h1>
  <p>Bringing you the finest from the UAE ‚Äî delightful chocolates, crisp biscuits, enchanting perfumes, gleaming gold, and more to love.</p>
  <!-- SALE BANNER -->
<div id="sale-banner" style="display:none; margin-top:15px; padding:12px; background:#ffebcc; border-radius:12px; color:#a05a32; font-weight:600; font-size:1.1em; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.12);">
  üéâ Year Start Sale: 10% OFF on <strong>ALL PRODUCTS!</strong> üõí<br>
  <span id="sale-countdown" style="display:block; margin-top:6px; font-weight:500; font-size:0.95em;"></span>
</div>
</header>

<button id="toggle-sidebar" aria-label="Toggle categories">‚ò∞</button>
<button id="cart-btn" aria-label="Open cart">
  üõí
  <span id="cart-badge">0</span>
</button>

<div class="container">
  <aside class="sidebar">
    <h2>Categories</h2>
    <ul id="category-list"></ul>
  </aside>
  <main class="products" id="product-list"></main>
</div>

<div id="cart-panel" aria-hidden="true">
  <h2>Your Order</h2>
  <div id="cart-items"></div>
  <div id="total">Total: ‚Ç±0.00</div>
  <button id="checkout-btn">Checkout</button>
</div>

<div id="checkout-modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-content">
    <button class="modal-close" onclick="closeCheckout()">‚úñ</button>
    <h3>üí∏ Checkout</h3>
    <div id="checkout-total">Total Payment: ‚Ç±0.00</div>

    <h4>üí≥ GCash Payment</h4>
    <p>
      Please send your payment to:<br>
      <strong>üì± 09351140013</strong><br>
      <strong>üë§ Maica Baldesancho</strong>
    </p>

    <h4>üìù Your Details</h4>
    <form id="order-form">
      <label>
        Name:<br>
        <input type="text" id="customer-name" required style="width:100%; padding:6px; margin:4px 0; border-radius:6px; border:1px solid #ccc;">
      </label>
      <label>
        Mobile Number:<br>
        <input type="text" id="customer-mobile" required style="width:100%; padding:6px; margin:4px 0; border-radius:6px; border:1px solid #ccc;">
      </label>
      <label>
        Address:<br>
        <textarea id="customer-address" required style="width:100%; padding:6px; margin:4px 0; border-radius:6px; border:1px solid #ccc;"></textarea>
      </label>
      <label>
        Note:<br>
        <textarea id="customer-note" style="width:100%; padding:6px; margin:4px 0; border-radius:6px; border:1px solid #ccc;"></textarea>
      </label>
      <button type="submit" style="background:#a67c52; color:white; width:100%; margin-top:10px;">Submit Order</button>
    </form>

    <button onclick="closeCheckout()" style="margin-top:10px; padding:8px 14px; border-radius:8px; background:#555; color:#fff; cursor:pointer;">Close</button>
  </div>
</div>

<script>
// Categories
const categories = ["ALL","BISCUITS & COOKIES","CHOCOLATES & SWEETS","TEA & BEVERAGES","DATES & MIDDLE EASTERN DELIGHTS","ELECTRONICS & ACCESSORIES","HEALTHY SNACKS & GRAINS","PERSONAL CARE & HOME","SPREADS & NUT BUTTERS","SCENTS & FRAGRANCES", "COMING SOON"];
function renderCategories(){
  const ul = document.getElementById("category-list");
  ul.innerHTML = categories.map(cat=>`<li onclick="filterCategory('${cat}')" class="${cat==='ALL'?'active':''}">${cat}</li>`).join('');
}
let activeCategory = "ALL";
function filterCategory(cat){
  activeCategory = cat;
  document.querySelectorAll('.sidebar li').forEach(li=>{
    li.classList.toggle('active', li.textContent===cat);
  });
  renderProducts();
  if(window.innerWidth <= 768) sidebar.classList.remove('open');
}

// Products
const products = [

  { category: "BISCUITS & COOKIES", name: "CHIPS AHOY 128GX3", price: 245, qty: 1, image: "CHIPS AHOY 128Gx3.jpeg" },
  { category: "BISCUITS & COOKIES", name: "DIGESTIVE ORIGINAL", price: 149, qty: 2, image: "DIGESTIVE ORIGINAL.png" },
  { category: "BISCUITS & COOKIES", name: "MCVITES DIGESTIVE BISCUIT CHOCO", price: 230, qty: 1, image: "MCVITES DIGESTIVE BISCUIT CHOCO.jpeg" },
  { category: "BISCUITS & COOKIES", name: "MCVITES DIGESTIVE BISCUIT VANILLA", price: 230, qty: 1, image: "MCVITES DIGESTIVE BISCUIT VANILLA.jpeg" },
  { category: "BISCUITS & COOKIES", name: "OREO ORIGINAL", price: 249, qty: 1, image: "OREO ORIGINAL.jpg" },
  { category: "CHOCOLATES & SWEETS", name: "M&MS CHOCO 45GX4", price: 199, qty: 4, image: "M&MS CHOCO 45GX4.jpg" },
  { category: "CHOCOLATES & SWEETS", name: "PEPERO ASSORTED 32GX4(3ALMOND + 1CHOCO)", price: 205, qty: 2, image: "PEPERO ASSORTED 1.jpeg" },
  { category: "CHOCOLATES & SWEETS", name: "PEPERO ALMOND", price: 55, qty: 5, image: "PPALMOND.webp" },
  { category: "CHOCOLATES & SWEETS", name: "RITTER ALMONDS 100G", price: 159, qty: 5, image: "RITTER ALMONDS 100G.jpeg" },
  { category: "CHOCOLATES & SWEETS", name: "RITTER HAZELNUT 100G", price: 159, qty: 7, image: "RITTER HAZELNUT 100G.webp" },
  { category: "CHOCOLATES & SWEETS", name: "BOUNTY MINIS 275GX2", price: 550, qty: 2, image: "BOUNTY MINIS 275GX2.jpg" },
  { category: "DATES & MIDDLE EASTERN DELIGHTS", name: "SALSA DATES 250G", price: 225, qty: 5, image: "SALSA DATES 250G.jpg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "GRANOLA NUTS & HONEY 300G", price: 179, qty: 4, image: "GRANOLA NUTS & HONEY 300G.jpeg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "GRANOLA TROPICAL FRUITS 300G", price: 179, qty: 10, image: "GRANOLA TROPICAL FRUITS 300G.jpeg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "GRANOLA DRIED FRUITS 300G", price: 179, qty: 1, image: "GRANOLA DRIED FRUITS 300G.png" },
  { category: "HEALTHY SNACKS & GRAINS", name: "GRANOLA FOREST FRUIT 300G", price: 195, qty: 3, image: "GRANOLA FOREST FRUIT 300G.jpeg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "CRANBERRY NUT BAR", price: 59, qty: 16, image: "CRANBERRY NUT BAR.jpeg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "ALMOND NUT BAR", price: 59, qty: 16, image: "ALMOND NUT BAR.jpeg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "PEACAN NUT BAR", price: 59, qty: 15, image: "PEACAN NUT BAR.jpeg" },
  { category: "HEALTHY SNACKS & GRAINS", name: "SUPERNUTS", price: 59, qty: 1, image: "SUPERNUTS.jpeg" },
  { category: "PERSONAL CARE & HOME", name: "FAIRY DISWASHING LAVANDER 600ML B1T1", price: 245, qty: 1, image: "FAIRY DISWASHING LAVANDER 600ML B1T1.jpeg" },
  { category: "PERSONAL CARE & HOME", name: "FAIRY DISWASHING APPLE 600ML B1T1", price: 245, qty: 1, image: "FAIRY DISWASHING APPLE 600ML B1T1.jpeg" },
  { category: "PERSONAL CARE & HOME", name: "DOVE SHAMPOO 350ML B1T1", price: 405, qty: 2, image: "DOVE SHAMPOO 350ML B1T1.webp" },
  { category: "SPREADS & NUT BUTTERS", name: "NUTELLA SPREAD 440G", price: 355, qty: 1, image: "NUTELLA SPREAD 440G.jpeg" },
  { category: "SPREADS & NUT BUTTERS", name: "PEANUT BUTTER CREAMY 1KG", price: 249, qty: 2, image: "PEANUT BUTTER CREAMY 1KG.jpeg" },
  { category: "SPREADS & NUT BUTTERS", name: "PEANUT BUTTER CRUNCHY 1KG", price: 249, qty: 1, image: "PEANUT BUTTER CRUNCHY 1KG.jpeg" },
  { category: "TEA & BEVERAGES", name: "KARAK TEA CARDAMOM 500G", price: 449, qty: 1, image: "KARAK TEA CARDAMOM 500G.jpeg" },
{ category: "SCENTS & FRAGRANCES", name: "A THOUSAND WISHES", price: 139, qty: 1, image: "A THOUSAND WISHES.png" },
{ category: "SCENTS & FRAGRANCES", name: "SUNSHINE LEMONS", price: 139, qty: 1, image: "SUNSHINE LEMONS.png" },
{ category: "SCENTS & FRAGRANCES", name: "MAHOGANY TEAKWOOD1", price: 139, qty: 1, image: "MAHOGANY TEAKWOOD1.png" },
{ category: "SCENTS & FRAGRANCES", name: "MAHOGANY TEAKWOOD2", price: 139, qty: 1, image: "MAHOGANY TEAKWOOD2.png" },
{ category: "SCENTS & FRAGRANCES", name: "INTO THE NIGHT", price: 139, qty: 1, image: "INTO THE NIGHT.png" },
{ category: "SCENTS & FRAGRANCES", name: "BLACK CHERRY MERLOT", price: 139, qty: 1, image: "BLACK CHERRY MERLOT.png" },
{ category: "SCENTS & FRAGRANCES", name: "WARM VANILLA SUGAR", price: 139, qty: 1, image: "WARM VANILLA SUGAR.png" },
{ category: "SCENTS & FRAGRANCES", name: "LAVENDER CLOUD", price: 139, qty: 1, image: "LAVENDER CLOUD.png" },
{ category: "COMING SOON", name: "LATTAFA AMEERAT AL ARAB EAU DE PARFUM", description: "An elegant oriental fragrance with rich floral and amber notes, capturing the essence of sophistication.", price: 0, qty: 0, image: "LATTAFA AMEERAT AL ARAB EAU DE PARFUM.png" },
{ category: "COMING SOON", name: "LATTAFA AMEERAT AL ARAB IMPERIUM", description: "A luxurious and royal scent blending warm spices and deep woods for a bold, lasting impression.", price: 0, qty: 0, image: "LATTAFA AMEERAT AL ARAB IMPERIUM.png" },
{ category: "COMING SOON", name: "LATTAFA AMEERAT AL ARAB PRIVE ROSE", description: "A romantic mix of rose petals and musk with a sweet oriental touch, perfect for special occasions.", price: 0, qty: 0, image: "LATTAFA AMEERAT AL ARAB PRIVE ROSE.png" },
{ category: "COMING SOON", name: "LATTAFA AMEERAT AL ARAB BLACK EAU DE PARFUM", description: "A mysterious and sensual fragrance with creamy vanilla, amber, and dark floral notes.", price: 0, qty: 0, image: "LATTAFA AMEERAT AL ARAB BLACK EAU DE PARFUM.png" },
{ category: "COMING SOON", name: "LATTAFA KHAMRAH ORIGINAL", description: "A rich gourmand fragrance with cinnamon, vanilla, and warm amber ‚Äî powerful and long-lasting.", price: 0, qty: 0, image: "LATTAFA KHAMRAH ORIGINAL.png" },
{ category: "COMING SOON", name: "LATTAFA KHAMRAH QAHWA", description: "A captivating blend of coffee, cinnamon, and caramel ‚Äî a unique twist on the Khamrah signature scent.", price: 0, qty: 0, image: "LATTAFA KHAMRAH QAHWA.png" },
{ category: "COMING SOON", name: "LATTAFA LIAM BLUE SHINE", description: "A vibrant and refreshing perfume with aquatic notes and subtle citrus undertones for everyday wear.", price: 0, qty: 0, image: "LATTAFA LIAM BLUE SHINE.png" },
{ category: "COMING SOON", name: "LATTAFA YARA CANDY", description: "A playful and sweet perfume bursting with fruity and sugary notes, ideal for youthful energy.", price: 0, qty: 0, image: "LATTAFA YARA CANDY.png" },
{ category: "COMING SOON", name: "LATTAFA YARA EAU DE PARFUM", description: "A soft, feminine scent with floral, fruity, and musky notes ‚Äî timeless and elegant.", price: 0, qty: 0, image: "LATTAFA YARA EAU DE PARFUM.png" },
{ category: "COMING SOON", name: "LATTAFA YARA MOI", description: "An enchanting combination of jasmine, vanilla, and creamy woods ‚Äî sophisticated yet subtle.", price: 0, qty: 0, image: "LATTAFA YARA MOI.png" },
{ category: "COMING SOON", name: "LATTAFA YARA TOUS", description: "A modern and chic fragrance blending soft florals and warm amber for a confident aura.", price: 0, qty: 0, image: "LATTAFA YARA TOUS.png" }


];

let cart = {};


function renderProducts() {
  const list = document.getElementById("product-list");
  const filtered = activeCategory === "ALL" ? products : products.filter(p => p.category === activeCategory);
  
  list.innerHTML = filtered.map((p, i) => {
    const originalIndex = products.findIndex(prod => prod.name === p.name && prod.category === p.category);

    // Determine discount
    const discount = p.category !== "COMING SOON" ? 0.10 : 0;
    const discountedPrice = products[originalIndex].price * (1 - discount);

    return `
      <div class="product">
        <div style="position:relative;">
          <img src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/300x200?text=No+Image';">
          ${
            discount > 0 
            ? `<div style="position:absolute; top:8px; left:8px; background:#f76c6c; color:white; font-weight:700; padding:4px 6px; border-radius:6px; font-size:0.75rem;">
                 10% OFF
               </div>` 
            : ''
          }
        </div>
        <h3>${p.name}</h3>
        <div class="price">
          ${
            discount > 0 
            ? `<span style="text-decoration:line-through; color:#a67c52; font-weight:400;">‚Ç±${products[originalIndex].price.toFixed(2)}</span>
               &nbsp; <span style="color:#e04e00; font-weight:600;">‚Ç±${discountedPrice.toFixed(2)}</span>`
            : `<span style="color:#5a4635; font-weight:600;">‚Ç±${products[originalIndex].price.toFixed(2)}</span>`
          }
        </div>
        <div class="stock">Available: <span id="stock-${originalIndex}">${products[originalIndex].qty}</span></div>
        <button id="btn-${originalIndex}" onclick="addToCart(${originalIndex})" 
          ${products[originalIndex].qty === 0 || p.category === "COMING SOON" ? 'disabled' : ''}>
          ${p.category === "COMING SOON" ? 'Coming Soon' : 'Add to Cart'}
        </button>
      </div>
    `;
  }).join('');
}

// Cart functions
function addToCart(i){ 
  if(products[i].qty <= 0) return;
  products[i].qty--;
  updateStockDisplay(i);

  // Apply 10% discount
  const discount = 0.10;
  const discountedPrice = products[i].price * (1 - discount);

  const name = products[i].name;
  if(!cart[name]){
    cart[name] = { name: name, price: discountedPrice, count: 0, index: i };
  }
  cart[name].count++;
  renderCart();
}


function removeFromCart(name){
  const item = cart[name];
  if(!item) return;

  item.count--;
  if(item.count <= 0){
    delete cart[name];
  }

  products[item.index].qty++;
  updateStockDisplay(item.index);

  renderCart();
}

function updateStockDisplay(index){
  const stockEl = document.getElementById(`stock-${index}`);
  const btn = document.getElementById(`btn-${index}`);
  if(stockEl) stockEl.textContent = products[index].qty;
  if(btn) btn.disabled = products[index].qty <= 0;
}

function renderCart(){
  const itemsDiv = document.getElementById("cart-items");
  const badge = document.getElementById("cart-badge");
  const totalEl = document.getElementById("total");

  let total = 0;
  let totalCount = 0;
  const entries = Object.values(cart);

  if(entries.length === 0){
    itemsDiv.innerHTML = "<p>No items yet.</p>";
    totalEl.textContent = "Total: ‚Ç±0.00";
    badge.textContent = "0";
    return;
  }

  itemsDiv.innerHTML = entries.map(item=>{
    const sub = item.count * item.price;
    total += sub;
    totalCount += item.count;
    return `
      <div class="cart-item">
        <span>${item.name} x${item.count}<br>
        <small>‚Ç±${item.price.toFixed(2)} each ‚Äî Subtotal: ‚Ç±${sub.toFixed(2)}</small></span>
        <button onclick="removeFromCart('${item.name}')">‚àí</button>
      </div>
    `;
  }).join('');

  totalEl.textContent = `Total: ‚Ç±${total.toFixed(2)}`;
  badge.textContent = totalCount;
}

// Cart Panel
const cartPanel = document.getElementById("cart-panel");
const cartBtn = document.getElementById("cart-btn");
cartBtn.addEventListener("click", ()=>{
  cartPanel.classList.toggle("open");
});

// Sidebar toggle
const sidebar = document.querySelector(".sidebar");
const toggleSidebarBtn = document.getElementById("toggle-sidebar");
toggleSidebarBtn.addEventListener("click", ()=>{
  sidebar.classList.toggle("open");
});

// Checkout Modal
// Checkout Modal
const checkoutModal = document.getElementById("checkout-modal");
const checkoutBtn = document.getElementById("checkout-btn");
checkoutBtn.addEventListener("click", ()=>{ showCheckout(); });

function showCheckout() {
  const entries = Object.values(cart);
  if(entries.length === 0) return;

  let totalPayment = entries.reduce((acc, item) => acc + item.price * item.count, 0);
  const totalEl = document.getElementById("checkout-total");
  totalEl.textContent = `Total Payment: ‚Ç±${totalPayment.toFixed(2)}`;

  checkoutModal.style.display = "flex";
  setTimeout(() => checkoutModal.classList.add("show"), 10);
  checkoutModal.setAttribute("aria-hidden", "false");
}

function closeCheckout() {
  checkoutModal.classList.remove("show");
  checkoutModal.setAttribute("aria-hidden", "true");
  setTimeout(() => {
    checkoutModal.style.display = "none";
  }, 250);
}
// Handle order form submission
document.getElementById("order-form").addEventListener("submit", function(e){
  e.preventDefault();

  const name = document.getElementById("customer-name").value;
  const mobile = document.getElementById("customer-mobile").value;
  const address = document.getElementById("customer-address").value;
  const note = document.getElementById("customer-note").value;

  const entries = Object.values(cart);
  if(entries.length === 0) return;

  // Build order summary string
  const orderSummary = entries
    .map(item => `${item.name} x${item.count} ‚Äî ‚Ç±${(item.price * item.count).toFixed(2)}`)
    .join("\n");

  const totalPayment = entries.reduce((acc, item) => acc + item.price * item.count, 0);

  // Google Form pre-fill URL
  const formBase = "https://docs.google.com/forms/d/e/1FAIpQLSemgnUku-wrSiqwwA5-0BqVRjSLIhsJbJfj2xP4s5wMB3aO0g/formResponse";

  // Replace entry IDs with your actual Google Form field entry numbers
  const formData = new FormData();
  formData.append("entry.922959490", name);          // Name field
  formData.append("entry.2014461761", mobile);        // Mobile
  formData.append("entry.325269226", address);       // Address
  formData.append("entry.1096533715", note);          // Note
  formData.append("entry.466455746", orderSummary + `\nTotal: ‚Ç±${totalPayment.toFixed(2)}`); // Order summary + total

  // Submit directly to Google Form (no new tab)
  fetch(formBase, {
    method: "POST",
    mode: "no-cors",
    body: formData
  }).then(() => {
    alert("‚úÖ Order received! Thank you for shopping.");
    cart = {};
    renderCart();
    closeCheckout();
  }).catch(err => {
    console.error(err);
    alert("Failed to submit order. Please try again.");
  });
});

// Initialize
renderCategories();
renderProducts();
renderCart();

// ===== SALE COUNTDOWN (Philippines Time) ===== 
function startSaleCountdown() {
  const banner = document.getElementById("sale-banner");
  const countdownEl = document.getElementById("sale-countdown");

  const saleStart = new Date(Date.UTC(2026, 0, 12, 0, 0, 0)); // Jan 12 00:00 UTC
  const saleEnd   = new Date(Date.UTC(2026, 0, 16, 23, 59, 59)); // Jan 16 23:59 UTC
  const PHT_OFFSET = 8 * 60 * 60 * 1000; // 8 hours in ms

  function updateCountdown() {
    const now = new Date();
    const phtNow = new Date(now.getTime() + PHT_OFFSET); // convert to PHT

    let diff, days, hours, minutes, seconds, text;

    if (phtNow < new Date(saleStart.getTime() + PHT_OFFSET)) {
      diff = saleStart.getTime() + PHT_OFFSET - phtNow.getTime();
      days = Math.floor(diff / (1000 * 60 * 60 * 24));
      hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      minutes = Math.floor((diff / (1000 * 60)) % 60);
      seconds = Math.floor((diff / 1000) % 60);
      text = `‚è≥ Sale starts in ${days}d ${hours}h ${minutes}m ${seconds}s`;
      banner.style.display = "block";
    } 
    else if (phtNow <= new Date(saleEnd.getTime() + PHT_OFFSET)) {
      diff = saleEnd.getTime() + PHT_OFFSET - phtNow.getTime();
      days = Math.floor(diff / (1000 * 60 * 60 * 24));
      hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
      minutes = Math.floor((diff / (1000 * 60)) % 60);
      seconds = Math.floor((diff / 1000) % 60);
      text = `üî• Hurry! Sale ends in ${days}d ${hours}h ${minutes}m ${seconds}s`;
      banner.style.display = "block";
    } 
    else {
      banner.style.display = "none";
      return;
    }

    countdownEl.textContent = text;
  }

  updateCountdown();
  setInterval(updateCountdown, 1000);
}

startSaleCountdown();

</script>
</body>
</html>